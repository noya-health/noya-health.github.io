!function(s){function e(e){for(var t,r,n=e[0],a=e[1],o=e[2],i=0,c=[];i<n.length;i++)r=n[i],Object.prototype.hasOwnProperty.call(l,r)&&l[r]&&c.push(l[r][0]),l[r]=0;for(t in a)Object.prototype.hasOwnProperty.call(a,t)&&(s[t]=a[t]);for(p&&p(e);c.length;)c.shift()();return d.push.apply(d,o||[]),u()}function u(){for(var e,t=0;t<d.length;t++){for(var r=d[t],n=!0,a=1;a<r.length;a++){var o=r[a];0!==l[o]&&(n=!1)}n&&(d.splice(t--,1),e=i(i.s=r[0]))}return e}function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return s[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}var r={},l={4:0},d=[];i.m=s,i.c=r,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var t=window.webpackJsonp=window.webpackJsonp||[],n=t.push.bind(t);t.push=e,t=t.slice();for(var a=0;a<t.length;a++)e(t[a]);var p=n;d.push([14,0]),u()}({"+/hr":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function b(e,t){var r,n={};for(r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}r.r(t);function i(e){for(var t="",r=0;r<e.length;++r)t+=String.fromCharCode(5^e.charCodeAt(r));return t}function c(e){return encodeURIComponent(btoa(i((r=3-(t=e).length%3,""+t+new Array(1+r).join(" ")))));var t,r}function s(e,t){return null!=t?t:(r=e,-1!==x.g.indexOf(r)&&J[e]||null);var r}function u(e){switch(e.tag){case"source-from-element":case"paymentMethod-from-element":return e.elementName;case"source-from-data":case"paymentMethod-from-data":case"source":case"paymentMethod":case"none":return null;default:return Object(h.a)(e)}}function l(e){return{type:"error",error:e}}function p(e){if("error"===e.type)return e;var t=e.object;switch(t.status){case"requires_confirmation":case"requires_capture":case"succeeded":return e;case"canceled":return l(function(e){switch(e.object){case"payment_intent":return{code:"payment_intent_unexpected_state",doc_url:"https://stripe.com/docs/error-codes/payment-intent-unexpected-state",payment_intent:e,type:"invalid_request_error"};case"setup_intent":return{code:"setup_intent_unexpected_state",doc_url:"https://stripe.com/docs/error-codes/setup-intent-unexpected-state",setup_intent:e,type:"invalid_request_error"};default:return Object(h.a)(e)}}(t));default:return l(function(e){switch(e.object){case"payment_intent":return e.last_payment_error?K({},e.last_payment_error,{payment_intent:e}):{code:"payment_intent_authentication_failure",doc_url:"https://stripe.com/docs/error-codes/payment-intent-authentication-failure",payment_intent:e,type:"invalid_request_error"};case"setup_intent":return e.last_setup_error?K({},e.last_setup_error,{setup_intent:e}):{code:"setup_intent_authentication_failure",doc_url:"https://stripe.com/docs/error-codes/setup-intent-authentication-failure",setup_intent:e,type:"invalid_request_error"};default:return Object(h.a)(e)}}(t))}}function d(e){return null!=e&&"function"==typeof e.toString?e.toString():""}function m(e,t){if("string"==typeof e&&8e3<e.length)return"<toolong>";if(0===t.indexOf("resourceTiming["))return e;if(ee[t.split("-")[0]])return e;var r=d(e).replace(/((?:password|pass|pwd)[^=]*=)[^&]*/gi,"$1<sanitized>");return d(r).replace(/(\d\s*\+*%*){6}[\d\s+%]+/g,"<sanitized>")}var f,h=r("PhLN"),y=function(){for(var e,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];window.console&&((e=window.console.warn).apply?e.apply(window.console,r):e(r.join(" ")))},O=r("rb9N"),j=r("mEtf"),P=r("7J+T"),k=r("Hjs2"),w=(Object(P.x)({name:Object(P.t)("react-stripe-js","stripe-js","react-stripe-elements"),version:Object(P.q)(P.z),startTime:Object(P.v)(P.r)}),function(e){var t={wrapper:"unknown",wrapper_version:null,es_module:!1,es_module_version:null};return e.forEach(function(e){"stripe-js"===e.name?(t.es_module=!0,e.version&&!t.es_module_version&&(t.es_module_version=e.version)):t.wrapper_version||(t.wrapper=e.name,t.wrapper_version=e.version)}),t}),S=r("76Yn"),T=r("VIC6"),I=r("6RrZ"),C=r("uyco"),z=r("aE9V"),R=r("LW1y"),F=r("FIix"),M=r("6poe"),N=r("8Dc6"),A=r("/AI2"),x=r("g2uG"),D="au_becs_debit",U="card",W="eps",L="fpx",H="ideal",q="p24",B="sepa_debit",V="netbanking",J=(n(f={},x.a.auBankAccount,D),n(f,x.a.card,U),n(f,x.a.cardNumber,U),n(f,x.a.cardExpiry,U),n(f,x.a.cardCvc,U),n(f,x.a.postalCode,U),n(f,x.a.iban,B),n(f,x.a.idealBank,H),n(f,x.a.fpxBank,L),n(f,x.a.p24Bank,q),n(f,x.a.netbankingBank,V),n(f,x.a.epsBank,W),f),G=(Object.assign,{_componentName:P.z,_implementation:Object(P.x)({_frame:Object(P.x)({id:P.z})})}),Y=Object(P.x)(G),K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z=r("zx1b"),Q=r("RnbQ"),X=r("4Xs6"),$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee={features:!0,key:!0,stripe_js_id:!0,event_count:!0,timestamp:!0,load_timestamp:!0,controller_load_time:!0,frame_width:!0,version:!0,event:!0,resource_timings:!0,dom_loading:!0,dom_complete:!0,dom_interactive:!0,since_sjs_load:!0,since_stripe_create:!0,since_wrapper_create:!0,since_group_create:!0,since_create:!0,until_first_create:!0,until_first_mount:!0,until_first_load:!0,mount_duration:!0,since_fetch:!0,source_id:!0,token_id:!0,start:!0,end:!0,logger_id:!0,time_from_pm_to_confirm:!0,time_to_create_pm:!0,time_from_confirm_to_poll_start:!0,time_polling:!0,funnel_event_elapsed_time:!0,cumulative_layout_shift:!0,first_contentful_paint:!0,largest_contentful_paint:!0,time_to_first_byte:!0,shownDuration:!0,latency:!0,duration:!0,paymentUserAgent:!0},te=function e(t,r){var i,n=1<arguments.length&&void 0!==r?r:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.params=(i={},function n(a,e){var o=1<arguments.length&&void 0!==e?e:"";Object.keys(a).forEach(function(e){var t=(o+"-"+e).replace(/^-/,""),r=a[e];if(null!=r)switch(void 0===r?"undefined":$(r)){case"object":Array.isArray(r)?i[t]=r.join(" "):n(r,t);break;case"number":case"boolean":case"string":i[t]=r;break;default:i[t]=String(r)}else i[t]=r})}(n),i)},re=r("JZIK");function ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ae(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ae)}var oe=(function(e,t,r){return t&&ne(e.prototype,t),r&&ne(e,r),e}(ae,[{key:"request",value:function(e){(new Image).src=Q.k+"?"+e}},{key:"send",value:function(e){var t=e.name,r=e.params,n={event:t};Object.keys(r).forEach(function(e){var t=r[e];null!=t&&(n[e]=m(t,e))}),this.request(Object(re.a)(n))}}]),ae);function ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ce(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ce)}!function(e,t,r){t&&ie(e.prototype,t),r&&ie(e,r)}(ce,[{key:"send",value:function(e){var t=e.name,a=e.params,r=a.element?""+a.element:"?";window.console&&console.group&&(console.groupCollapsed("%c["+r+" -> Logger]: "+t,"color: blue"),Object.keys(a).forEach(function(e){var t=a[e],r=m(t,e),n="string"==typeof t?JSON.stringify(t):t;String(t)===String(r)?console.info("  ",e,"=",n):null==t?console.info("  ",e,"=",n,"(not sent)"):console.info("  ",e,"=","string"==typeof t?JSON.stringify(r):r,"( original:",n,")")}),console.groupEnd())}}]);var se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var le=(function(e,t,r){return t&&ue(e.prototype,t),r&&ue(e,r),e}(de,[{key:"updateParams",value:function(e){se(this.baseParams,e)}},{key:"setDefaultPrefix",value:function(e){this.prefix=e}},{key:"log",value:function(e,t,r){var n=1<arguments.length&&void 0!==t?t:{},a=2<arguments.length&&void 0!==r?r:this.prefix,o=se({event_count:++this.eventCount,timestamp:Date.now()},this.baseParams,n),i=new te(""+a+e,o);this.transports.forEach(function(e){e.send(i)})}}]),de);function de(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,de),this.prefix="",this.transports=e,this.eventCount=0,this.baseParams={version:Q.m},t&&this.updateParams({running_tests:!0})}var pe=[];pe.push(new oe);var me=new le(pe,!1),fe={setDefaultPrefix:function(e){return me.setDefaultPrefix(e)},updateParams:function(e){return me.updateParams(e)},log:function(e,t,r){return me.log(e,t,r)}},he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};fe.setDefaultPrefix("elements.");function _e(e,t,r,n){var a=3<arguments.length&&void 0!==n?n:Le;return Object(Ue.a)({url:e,method:t,data:r,headers:a.headers}).then(function(e){a.logResult&&a.logResult(e);var t=JSON.parse(e.responseText);return 200===e.status?{type:"object",object:t}:{type:"error",error:a.includeErrorStatus?We({},t.error,{status:e.status||0}):t.error}})}function be(e){if(e&&window.performance&&window.performance.getEntriesByName){var t=window.performance.getEntriesByName(e);if(!t||0===t.length)return{errorMsg:"No resource timing entries found"};var r,n=t[t.length-1];return r=n,Object(I.i)(r,Be)}}function ye(e,t,r,n){var a=3<arguments.length&&void 0!==n?n:$e;Ye();var o=new A.a,i=""+Ge+e;return Ke=Ze=!0,_e(i,t,r,Je({},a,{logResult:function(e){Ve(o,i,r,e)}}))}function ve(t){return function(e){return ye(t,"POST",e)}}function ge(e){return e.filter(function(e){return rt[e]}).map(function(e){return rt[e]}).join(",")}function Oe(e){return Object(I.e)(e,function(e){return e.replace(nt,"")})}function je(e){var t=e.cardExpiry?e.cardExpiry.replace(new RegExp("^"+Q.h),"").split(" / "):[],r={number:e.cardNumber&&Object(at.a)(e.cardNumber),cvc:e.cardCvc||void 0,exp_month:t[0],exp_year:t[1]},n=e.postalCode?{address:{postal_code:e.postalCode}}:{},a={address_zip:e.postalCode||void 0};return{card:Object(I.j)(r,function(e,t){return void 0!==t}),owner:Object(I.j)(n,function(e,t){return void 0!==t}),legacyOwner:Object(I.j)(a,function(e,t){return void 0!==t})}}function Pe(e){return Object(tt.a)(Object(I.c)(e,["payment_method_data","billing_details","address","postal_code"]))?{type:"error",error:et("card_number_in_postal_code_field","postal_code")}:Object(tt.a)(Object(I.c)(e,["payment_method_data","billing_details","name"]))?{type:"error",error:et("card_number_in_name_field","name")}:null}function Ee(e,t,r){var n=Object(Z.d)(t),a=void 0;switch(e.type){case"error":var o=Object(M.a)(e.error,n),i=$t(o,2),c=i[0],s=i[1],a={type:"error",error:c,locale:n};r&&s.forEach(function(e){r.report.apply(r,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e))});break;case"object":a={type:"object",object:e.object,locale:n};break;default:return Object(h.a)(e.type)}return a}var ke,we,Se,Te={updateParams:fe.updateParams,log:function(e,t){var r=1<arguments.length&&void 0!==t?t:{};fe.log(e,he({frame_width:window.innerWidth},r))}},Ie="stripe.js/"+Q.m+"; stripe-js-v3/"+Q.m,Ce=Ie+"; raw-card",ze=Ie+"; create-source-card-data",Re="account",Fe="bank_account",Me="card",Ne="person",Ae="pii",xe="cvc_update",De=(a(ke={},x.a.card,Me),a(ke,x.a.cardNumber,Me),a(ke,x.a.cardExpiry,Me),a(ke,x.a.cardCvc,Me),a(ke,x.a.postalCode,Me),a(ke,x.a.iban,Fe),ke),Ue=r("DUPQ"),We=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Le=Object.freeze({}),He=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Be=["startTime","duration","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd"],Ve=function(e,t,r,n,a){if(n.getResponseHeader&&n.responseURL){var o=(u=r).hasOwnProperty("card")?"card":u.hasOwnProperty("bank_account")?"bank_account":u.hasOwnProperty("pii")?"pii":u.hasOwnProperty("apple_pay")?"apple_pay":"unknown",i=new A.a,c=be(n.responseURL),s=void 0;if(!a)try{s=n.getResponseHeader("Request-Id")}catch(e){}fe.log("rum.stripejs",He({requestId:s,tokenType:o,url:t,status:n.status,start:e.getAsPosixTime(),end:i.getAsPosixTime()},function(e,t){var i={};if(!e)return i;return function n(a,e){var o=1<arguments.length&&void 0!==e?e:"";Object.keys(a).forEach(function(e){var t=(o+"["+e+"]").replace(/^-/,""),r=a[e];if(null!=r)switch(void 0===r?"undefined":qe(r)){case"object":n(r,t);break;case"number":i[t]=Math.round(1e3*r)/1e3;break;default:i[t]=r}})}(e,t),i}(c,"resourceTiming"),{version:3,paymentUserAgent:Ie}),"")}var u},Je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ge=Q.a,Ye=function(){},Ke=!1,Ze=!1,Qe=function(e){var t=Object(F.a)(e);return!(t!==Q.a&&(Object(S.b)(e),1))&&(Ge=t,!(Ke=Ze=!1))},Xe=function(e){Ye=e},$e=Object.freeze({}),et=function(e,t){return{type:"input_validation_error",code:e,param:t}},tt=r("8mVG"),rt=(o(we={},x.a.cardNumber,"number"),o(we,x.a.cardExpiry,"exp"),o(we,x.a.cardCvc,"cvc"),o(we,x.a.postalCode,"zip"),we),nt=new RegExp(""+Q.h,"g"),at=r("VgJf"),ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},it=function(e){if(e&&"object"===(void 0===e?"undefined":ot(e))){var t=e.addressLines,r=e.givenName,n=e.familyName,a=e.locality,o=e.administrativeArea,i=e.postalCode,c=e.countryCode,s=[r,n].filter(function(e){return e});return{name:s.length?s.join(" "):void 0,address_line1:t&&Array.isArray(t)?t[0]:void 0,address_line2:t&&Array.isArray(t)?t.slice(1).join(", "):void 0,address_city:a,address_state:o,address_zip:i,address_country:c}}return{}},ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},st={email:Object(P.v)(P.z),usage:Object(P.v)(P.z)},ut={city:Object(P.v)(P.z),country:Object(P.v)(P.z),line1:Object(P.v)(P.z),line2:Object(P.v)(P.z),postal_code:Object(P.v)(P.z),state:Object(P.v)(P.z)},lt=ct({},ut,{town:Object(P.v)(P.z)}),dt=Object(P.g)({front:Object(P.v)(P.z),back:Object(P.v)(P.z)}),pt={address:Object(P.v)(Object(P.g)(ut)),dob:Object(P.v)(Object(P.g)({day:Object(P.w)(P.z,Object(P.j)(1,31)),month:Object(P.w)(P.z,Object(P.j)(1,12)),year:Object(P.w)(P.z,P.r)})),first_name:Object(P.v)(P.z),last_name:Object(P.v)(P.z),maiden_name:Object(P.v)(P.z),verification:Object(P.v)(Object(P.w)(Object(P.g)({document:Object(P.v)(P.z),document_back:Object(P.v)(P.z),additional_document:Object(P.v)(P.z),additional_document_back:Object(P.v)(P.z)}),Object(P.g)({document:Object(P.v)(dt),additional_document:Object(P.v)(dt)})))},mt={card:{name:Object(P.v)(P.z),address_line1:Object(P.v)(P.z),address_line2:Object(P.v)(P.z),address_city:Object(P.v)(P.z),address_state:Object(P.v)(P.z),address_zip:Object(P.v)(P.z),address_country:Object(P.v)(P.z),currency:Object(P.v)(P.z),number:Object(P.o)("Elements"),cvc:Object(P.o)("Elements"),exp_month:Object(P.o)("Elements"),exp_year:Object(P.o)("Elements")},cvc_update:{cvc:Object(P.o)("Elements")},pii:{id_number:Object(P.v)(P.z),personal_id_number:Object(P.v)(P.z),ssn_last_4:Object(P.v)(P.z)},bank_account:{account_number:Object(P.v)(Object(P.e)([x.a.iban],"The 'account_number' parameter is not supported when creating a token with the '"+x.a.iban+"' Element")(P.z)),country:Object(P.v)(Object(P.e)([x.a.iban],"The 'country' parameter is not supported when creating a token with the '"+x.a.iban+"' Element")(P.z)),currency:Object(P.v)(P.z),routing_number:Object(P.v)(Object(P.e)([x.a.iban],"The 'routing_number' parameter is not supported when creating a token with the '"+x.a.iban+"' Element")(P.z)),account_use:Object(P.v)(P.z),account_holder_name:Object(P.v)(P.z),account_holder_type:Object(P.v)(P.z),debit_agreement_shown_and_accepted:Object(P.v)(P.c)},account:{legal_entity:Object(P.v)(Object(P.g)(ct({},pt,{additional_owners:Object(P.v)(Object(P.b)(Object(P.g)(pt))),address_kana:Object(P.v)(Object(P.g)(lt)),address_kanji:Object(P.v)(Object(P.g)(lt)),business_name:Object(P.v)(P.z),business_name_kana:Object(P.v)(P.z),business_name_kanji:Object(P.v)(P.z),business_tax_id:Object(P.v)(P.z),business_vat_id:Object(P.v)(P.z),first_name_kana:Object(P.v)(P.z),first_name_kanji:Object(P.v)(P.z),gender:Object(P.v)(Object(P.t)("male","female")),last_name_kana:Object(P.v)(P.z),last_name_kanji:Object(P.v)(P.z),personal_address:Object(P.v)(Object(P.g)(ut)),personal_address_kana:Object(P.v)(Object(P.g)(lt)),personal_address_kanji:Object(P.v)(Object(P.g)(lt)),personal_id_number:Object(P.v)(P.z),phone_number:Object(P.v)(P.z),ssn_last_4:Object(P.v)(Object(P.y)(4,4)),tax_id_registrar:Object(P.v)(P.z),type:Object(P.v)(Object(P.t)("individual","company","non_profit","government_entity")),structure:Object(P.v)(Object(P.t)("government_instrumentality","governmental_unit","incorporated_non_profit","limited_liability_partnership","multi_member_llc","private_company","private_corporation","private_partnership","public_company","public_corporation","public_partnership","single_member_llc","sole_proprietorship","tax_exempt_government_instrumentality","unincorporated_association","unincorporated_non_profit")),company_verification:Object(P.v)(Object(P.g)({document:P.z,document_back:Object(P.v)(P.z)}))}))),individual:Object(P.v)(Object(P.g)(ct({},pt,{first_name_kana:Object(P.v)(P.z),first_name_kanji:Object(P.v)(P.z),last_name_kana:Object(P.v)(P.z),last_name_kanji:Object(P.v)(P.z),address_kana:Object(P.v)(Object(P.g)(lt)),address_kanji:Object(P.v)(Object(P.g)(lt)),gender:Object(P.v)(Object(P.t)("male","female")),email:Object(P.v)(P.z),phone:Object(P.v)(P.z),id_number:Object(P.v)(P.z),ssn_last_4:Object(P.v)(Object(P.y)(4,4)),relationship:Object(P.v)(Object(P.g)(ut))}))),company:Object(P.v)(Object(P.g)({name:Object(P.v)(P.z),name_kana:Object(P.v)(P.z),name_kanji:Object(P.v)(P.z),phone:Object(P.v)(P.z),tax_id:Object(P.v)(P.z),tax_id_registrar:Object(P.v)(P.z),vat_id:Object(P.v)(P.z),structure:Object(P.v)(Object(P.t)("government_instrumentality","governmental_unit","incorporated_non_profit","limited_liability_partnership","multi_member_llc","private_company","private_corporation","private_partnership","public_company","public_corporation","public_partnership","single_member_llc","sole_proprietorship","tax_exempt_government_instrumentality","unincorporated_association","unincorporated_non_profit")),directors_provided:Object(P.v)(P.c),owners_provided:Object(P.v)(P.c),executives_provided:Object(P.v)(P.c),address:Object(P.v)(Object(P.g)(ut)),address_kana:Object(P.v)(Object(P.g)(lt)),address_kanji:Object(P.v)(Object(P.g)(lt)),verification:Object(P.v)(Object(P.g)({document:Object(P.g)({front:Object(P.v)(P.z),back:Object(P.v)(P.z)})}))})),business_type:Object(P.v)(Object(P.t)("individual","company","non_profit","government_entity")),tos_shown_and_accepted:Object(P.v)(Object(P.h)(!0))},person:ct({},pt,{first_name_kana:Object(P.v)(P.z),first_name_kanji:Object(P.v)(P.z),last_name_kana:Object(P.v)(P.z),last_name_kanji:Object(P.v)(P.z),address_kana:Object(P.v)(Object(P.g)(lt)),address_kanji:Object(P.v)(Object(P.g)(lt)),gender:Object(P.v)(Object(P.t)("male","female")),email:Object(P.v)(P.z),phone:Object(P.v)(P.z),id_number:Object(P.v)(P.z),ssn_last_4:Object(P.v)(Object(P.y)(4,4)),relationship:Object(P.v)(Object(P.g)({account_opener:Object(P.v)(P.c),representative:Object(P.v)(P.c),executive:Object(P.v)(P.c),director:Object(P.v)(P.c),owner:Object(P.v)(P.c),percent_ownership:Object(P.v)(Object(P.j)(0,100)),title:Object(P.v)(P.z)}))})},ft=function(e,t,r){switch(De[e]){case Me:var n=je(Oe(t)),a=n.card,o=n.legacyOwner,i=r&&r.length?ge(r):void 0;return{data:{card:ct({},a,o)},pastedFields:i,type:Me,warnings:[]};case Fe:return{data:{bank_account:t[e]?{account_number:Object(at.b)(t[e]),country:t[e].slice(0,2)}:{}},type:"bank_account",warnings:[]};default:throw new Error("No corresponding token type for this Element: "+e+".")}},ht=function(e,t,r){if("apple_pay"===e){var n,a,o,i=t.token,c=t.currencyCode,s=t.total,u=i;return"simulated identifier"===u.transactionIdentifier.toLowerCase()&&(n="4242424242424242",a=s&&s.amount?s.amount:"0",o=c?c.toLowerCase():"usd",u=ct({paymentData:""},u,{cardNumber:n,transactionIdentifier:"ApplePayStubs~"+n+"~"+a+"~"+o+"~"+Math.random().toString(36).slice(-10)})),{type:Me,data:{pk_token:JSON.stringify(u.paymentData),pk_token_transaction_id:u.transactionIdentifier,pk_token_payment_network:u.paymentMethod.network,pk_token_instrument_name:u.paymentMethod.displayName,card:t.billingContact?it(t.billingContact):{}},warnings:[]}}var l,d,p,m=Object(P.H)(P.t.apply(void 0,v(Object.keys(mt))),e,"token type").value,f=Object(P.H)((d=st,p=mt[l=m],Object(P.x)(ct({},d,p,g({},l,Object(P.v)(Object(P.x)(p)))))),t,"token creation parameter",{element:r}),h=f.value||{},_=h[e],b=Object.keys(mt[m]),y=ct(g({},m,ct({},Object(I.i)(h,b),_)),Object(I.h)(h,[].concat(v(b),[e])));return{type:e,data:Object(I.f)({},y),warnings:f.warnings}},_t=function(e){return Object(tt.a)(Object(I.c)(e,["card","address_zip"]))?O.a.resolve({type:"error",error:et("card_number_in_postal_code_field","address_zip")}):Object(tt.a)(Object(I.c)(e,["card","name"]))?O.a.resolve({type:"error",error:et("card_number_in_name_field","name")}):ye("tokens","POST",e)},bt={type:Object(P.t)("au_becs_debit"),currency:Object(P.t)("aud"),au_becs_debit:Object(P.g)({bsb_number:P.z,account_number:P.z}),mandate:Object(P.x)({acceptance:Object(P.g)({status:Object(P.t)("accepted")})})},yt={transformElementData:function(e,t,r,n){var a=n&&n.length?ge(n):void 0,o=Oe(t);switch(r){case"au_becs_debit":return{type:D,data:{au_becs_debit:{bsb_number:Object(at.c)(o.bsbValue),account_number:o.accountNumberValue}}};case"card":var i=je(o),c=i.owner,s=i.card;return{type:U,data:{card:s,owner:c},pastedFields:a};case"ideal":return{type:H,data:{ideal:{bank:o[e]}}};case"sepa_debit":return{type:B,data:{sepa_debit:{iban:Object(at.b)(o[e])}}};default:return Object(h.a)(r)}},transformData:function(e,t){return"au_becs_debit"!==e?{type:e,data:t}:(Object(P.H)(Object(P.x)(bt),t,"source creation parameter"),{type:e,data:Object(I.f)(t,{mandate:{acceptance:{type:"online",online:{infer_from_client:!0}}}})})},retrieve:(Se="sources",function(e,t){return ye(Se+"/"+e,"GET",t)}),create:function(e){return Object(tt.a)(Object(I.c)(e,["owner","address","postal_code"]))?O.a.resolve({type:"error",error:et("card_number_in_postal_code_field","postal_code")}):Object(tt.a)(Object(I.c)(e,["owner","name"]))?O.a.resolve({type:"error",error:et("card_number_in_name_field","name")}):ye("sources","POST",e)}},vt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gt=function(e,t,r){return ye("payment_intents/"+e,"GET",vt({},r,{client_secret:t}))},Ot=function(e,t,r){var n=Pe(r);return n?O.a.resolve(n):ye("payment_intents/"+e+"/confirm","POST",vt({},r,{client_secret:t}))},jt=function(e,t,r){var n=Pe(r);return n?O.a.resolve(n):ye("payment_intents/"+e,"POST",vt({},r,{client_secret:t}))},Pt=function(e,t){return ye("payment_intents/"+e+"/source_cancel","POST",vt({},t))},Et=function(e,t,r){return ye("payment_intents/"+e+"/verify_microdeposits","POST",vt({},r,{client_secret:t}))},kt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wt=function(e,t,r){return ye("setup_intents/"+e+"/confirm","POST",kt({},r,{client_secret:t}))},St=function(e,t,r){return ye("setup_intents/"+e,"GET",kt({},r,{client_secret:t}))},Tt=function(e,t){return ye("setup_intents/"+e+"/source_cancel","POST",kt({},t))},It=function(e,t,r){return ye("setup_intents/"+e+"/verify_microdeposits","POST",kt({},r,{client_secret:t}))},Ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zt=function(e,t,r,n){var a=n&&n.length?ge(n):void 0,o=t.value,i=void 0;switch(r){case"au_becs_debit":return i=Oe(Ct({},o)),{type:D,data:{au_becs_debit:{bsb_number:Object(at.c)(i.bsbValue),account_number:i.accountNumberValue}}};case"card":i=Oe(Ct({},o));var c=je(i),s=c.owner,u=c.card;return{type:U,data:{card:u,billing_details:s},pastedFields:a};case"fpx":var l=t.accountHolderType,i=Oe(Ct({},o,{accountHolderType:l}));return{type:L,data:{fpx:{bank:i[e],account_holder_type:i.accountHolderType}}};case"ideal":return i=Oe(Ct({},o)),{type:H,data:{ideal:{bank:i.idealBank}}};case"p24":return i=Oe(Ct({},o)),{type:q,data:{p24:{bank:i.p24Bank}}};case"netbanking":return i=Oe(Ct({},o)),{type:V,data:{netbanking:{bank:i.netbankingBank}}};case"sepa_debit":return i=Oe(Ct({},o)),{type:B,data:{sepa_debit:{iban:Object(at.b)(i[e])}}};case"eps":return i=Oe(Ct({},o)),{type:W,data:{eps:{bank:i.epsBank}}};default:return Object(h.a)(r)}},Rt=function(e,t){return{type:e,data:t}},Ft=function(e){return Object(tt.a)(Object(I.c)(e,["billing_details","address","postal_code"]))?O.a.resolve({type:"error",error:et("card_number_in_postal_code_field","postal_code")}):Object(tt.a)(Object(I.c)(e,["billing_details","name"]))?O.a.resolve({type:"error",error:et("card_number_in_name_field","name")}):ye("payment_methods","POST",e)},Mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nt={create:ve("payment_pages"),retrieve:function(e,t){return ye("payment_pages/"+e,"GET",t,{includeErrorStatus:!0})},checkState:function(e,t){return ye("payment_pages/"+e+"/poll","GET",Mt({},t))},checkWebhookStatus:function(e,t){return ye("checkout/sessions/completed_webhook_delivered/"+e,"GET",Mt({},t))}},At={object:P.z,session:P.z},xt={create:ve("apple_pay/sessions"),transforms:Object(P.x)(At)},Dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ut="01",Wt="02",Lt="03",Ht="04",qt="05",Bt=function(e,t,r,n,a){return ye("3ds2/authenticate","POST",Dt({source:e,browser:JSON.stringify(Dt({},n,{challengeWindowSize:r?(o=t,r?o<390?Ut:o<500?Wt:o<600?Lt:o<768?Ht:qt:qt):null,threeDSCompInd:"Y",browserJavaEnabled:navigator.javaEnabled(),browserJavascriptEnabled:!0,browserLanguage:navigator.language||navigator.browserLanguage,browserColorDepth:String(screen.colorDepth),browserScreenHeight:String(screen.height),browserScreenWidth:String(screen.width),browserTZ:String((new Date).getTimezoneOffset()),browserUserAgent:navigator.userAgent}))},a));var o},Vt=function(e,t,r){var n={};t.enrollment&&t.cres&&(n={enrollment:t.enrollment,final_cres:atob(t.cres)});var a={};return t.cryptogram&&(a={cryptogram:t.cryptogram}),ye("3ds2/challenge_complete","POST",Dt({source:e},n,a,r))},Jt={create:ve("radar/session")},Gt=function(e,t){var r="https://api.stripe.com/v1/issuing/cards/"+e;return Object(Ue.a)({url:r,method:"GET",headers:{Authorization:"Bearer "+t},data:{expand:["number","cvc"]}}).then(function(e){var t=JSON.parse(e.responseText);return 200===e.status?{type:"object",object:t}:{type:"error",error:t}}).catch(function(e){return{type:"error",error:e}})},Yt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kt=function(t,e){if("string"!=typeof t||6!==t.length||String(parseInt(t,10))!==t)throw new Error("Invalid BIN prefix");var r=new A.a,n=Q.c+"card-metadata";return _e(n,"GET",Yt({bin_prefix:t},e),{logResult:function(e){Ve(r,n+"?bin_prefix="+t,{},e,!0)}})},Zt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qt=function(e,t,r,n){return ye(("payment"===r?"payment_intents":"setup_intents")+"/"+e+"/acss_sessions","POST",Zt({client_secret:t},n))},Xt=function(e,t){return ye("return_intents/"+e+"/confirm","POST",t)},$t=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&c.return&&c.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},er=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&c.return&&c.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rr=function(e,t,r){return t&&nr(e.prototype,t),r&&nr(e,r),e};function nr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ar(e){return e.replace("https://checkout.stripe.com/","https://checkout.stripe.com/")}var or=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ir=[Re,Fe,Ne,Ae,xe,"apple_pay"],cr=function(e){var t=0<arguments.length&&void 0!==e?e:{},r=Math.random()<.1,n=r&&Math.random()<.5;return or({},t,{cm:r,pc:n})},sr=(rr(ur,[{key:"report",value:function(e,t){Te.log(e,t)}},{key:"logPerformanceTimings",value:function(e){var t,r,n,a,o,i,c,s,u,l,d,p,m,f,h=this;"complete"===document.readyState?(r=(t=e.timings).mountTimestamp,n=t.createTimestamp,a=e.loadCount,o=e.matchFrame,i=this.loadTimestamp,m=p=d=l=u=null,window.performance&&(window.performance.timing&&(s=(c=window.performance.timing).fetchStart,u=c.domLoading-s,l=c.domInteractive-s,d=c.domComplete-s,p=A.a.fromPosixTime(s).getElapsedTime(i)),window.performance.getEntriesByType&&(m=window.performance.getEntriesByType("resource").reduce(function(e,t){if(-1===t.name.indexOf("//q.stripe.com")){var r=t.name.match(/\/([^/#?]*)(?:$|[#?])/);if(r&&r[1]){var n=r[1].replace(/-[0-9a-f]{32}\./,".");return or({},e,_({},n,{transfer_size:t.transferSize,duration:Math.round(t.duration)}))}}return e},{}))),f=n.getElapsedTime(i),this.report("timings",{element:this.controllerFor(),dom_loading:u,dom_interactive:l,dom_complete:d,since_sjs_load:this.stripeJsLoadTimestamp.getElapsedTime(i),since_stripe_create:f,since_wrapper_create:this.createWrapperTimestamp?this.createWrapperTimestamp.getElapsedTime(i):null,since_create:f,mount_duration:r.getElapsedTime(i),since_fetch:p,load_count:a,match_frame:o,resource_timings:m})):window.addEventListener("load",function(){return h.logPerformanceTimings(e)})}},{key:"innerAction",value:function(e,t){var r=this;if(Q.g[e]){var n=t&&"object"===(void 0===t?"undefined":tr(t))?t:{},a=void 0;switch(e){case"TOKENIZE":a=this.actionTokenizeForInner;break;case"RETRIEVE_PAYMENT_INTENT":a=this.actionRetrievePaymentIntentForInner;break;case"RETRIEVE_SETUP_INTENT":a=this.actionRetrieveSetupIntentForInner;break;case"COMPLETE_CHALLENGE_3DS2":a=this.actionCompleteChallenge3DS2;break;case"RETRIEVE_ISSUING_CARD_NUMBER":a=this.actionRetrieveIssuingCardNumberForInner;break;case"RETRIEVE_ISSUING_CARD_CVC":a=this.actionRetrieveIssuingCardCvcForInner;break;case"RETRIEVE_ISSUING_CARD_EXPIRY":a=this.actionRetrieveIssuingCardExpiryForInner;break;case"RETRIEVE_CARD_METADATA":a=this.actionRetrieveCardMetadata;break;case"VERIFY_CAPTCHA_CHALLENGE":a=this.actionVerifyCaptchaChallenge;break;default:return Object(h.b)(e),this.report("fatal.unhandled_action",{type:e,options:t}),O.a.reject(new j.a("Unhandled action: "+e))}return this.report(e.toLowerCase(),{element:t.elementName}),new O.a(function(e){e(a.call(r,n))})}return this.report("fatal.unknown_action",{type:e,options:t}),O.a.reject(new j.a("Unknown action: "+e))}},{key:"reportFetchResult",value:function(e,t,r){switch(t.type){case"error":var n=t.error;this.report(e+".server_error",or({error:n},r));break;case"object":this.report(e+".success",or({},(a=t.object,{object_id:String(a.id),object_kind:String(a.object),object_type:String(a.type||void 0),object_livemode:String(a.livemode)}),r));break;default:Object(h.a)(t)}var a}},{key:"handleFetchErrorTagged",value:function(e,t){if("NetworkError"===t.name)return this.report(e+".network_error",{error:t}),this._localizeFetchResult({type:"error",error:{type:"api_connection_error"}});throw this.report(e+".unknown_error",{error:t}),t}},{key:"authenticationParams",value:function(){return{key:this.apiKey,_stripe_account:this.stripeAccount,_stripe_version:this.apiVersion}}},{key:"paymentMetadata",value:function(){return or({payment_user_agent:Ie,time_on_page:this.stripeJsLoadTimestamp.getElapsedTime()},this.referrer?{referrer:this.referrer}:{})}},{key:"transformConfirmWithSourceParams",value:function(e,t,r){return"card"===e.expected_payment_method_type&&t&&t.handleActions?or({},e,{use_stripe_sdk:!0,spc_eligible:r}):e}},{key:"transformConfirmWithPaymentMethodParams",value:function(e,t,r,n){switch(e){case"acss_debit":case"au_becs_debit":case"bacs_debit":case"bancontact":case"ideal":case"sepa_debit":case"eps":case"sofort":return or({},n,{mandate_data:{customer_acceptance:{type:"online",online:{infer_from_client:!0}}}});case"card":return t&&t.handleActions?or({},n,{use_stripe_sdk:!0,spc_eligible:r}):n;case"wechat_pay":return Object(I.f)(n,{payment_method_options:{wechat_pay:{client:"web_manual_display"}}});default:return n}}},{key:"_transformPaymentMethodOptions",value:function(c){var s=this;return O.a.resolve().then(function(){if(!c||"object"!==(void 0===c?"undefined":tr(c)))return c;var e=c.card,t=b(c,["card"]);if(!e||"object"!==(void 0===e?"undefined":tr(e)))return c;var r=e.cvc,n=b(e,["cvc"]);if(null==r)return c;var a,o,i=(a=r,"error"===(o=Object(P.I)(Y,a,"")).type?null:o.value);return i?s._retrieveElementData(i._implementation._frame.id,!1).then(function(e){return"error"===e.type?O.a.reject(e):or({},t,{card:or({},n,{cvc:e.value.cardCvc})})}):or({},t,{card:or({},e,{payment_user_agent:Ce})})}).then(function(e){return{type:"payment_method_options",paymentMethodOptions:e}},function(e){return e})}},{key:"createPaymentMethodParamsWithElement",value:function(e,u){var t,l=this,r=e.frameId,d=e.elementName,n=e.type,p=e.paymentMethodData,m=e.mids,a=s(d,n),o=Object(P.f)((_(t={},x.a.auBankAccount,Object(P.t)(D)),_(t,x.a.card,Object(P.t)(U)),_(t,x.a.cardNumber,Object(P.t)(U)),_(t,x.a.cardExpiry,Object(P.t)(U)),_(t,x.a.cardCvc,Object(P.t)(U)),_(t,x.a.postalCode,Object(P.t)(U)),_(t,x.a.idealBank,Object(P.t)(H)),_(t,x.a.p24Bank,Object(P.t)(q)),_(t,x.a.fpxBank,Object(P.t)(L)),_(t,x.a.netbankingBank,Object(P.t)(V)),_(t,x.a.iban,Object(P.t)(B)),_(t,x.a.epsBank,Object(P.t)(W)),t)),f=Object(P.H)(o,a,"type",{element:d}).value;return this._retrieveElementData(r).then(function(e){if("error"===e.type)return l.report(u+".validation_error",{error:e.error,element:d}),e;var t=e.element,r=e.locale,n=e.pastedFields,a=zt(t,e,f,n),o=a.data,i=a.type,c=a.pastedFields?{pastedFields:a.pastedFields}:{},s=Object(I.f)({type:i},p,o);return l.transformPaymentMethodParams(or({data:s,elementName:t,mids:m},c)).then(function(e){return{type:"element_payment_method_params",locale:r,paymentMethodParams:l.rawCardDataPresent(p)?or({},e,{payment_user_agent:ze}):e}})})}},{key:"createSourceParamsWithElement",value:function(e,l){var t,d=this,r=e.frameId,p=e.elementName,n=e.type,m=e.sourceData,f=e.mids,a=s(p,n),o=Object(P.f)((_(t={},x.a.auBankAccount,Object(P.t)(D)),_(t,x.a.iban,Object(P.t)(B)),_(t,x.a.card,Object(P.t)(U)),_(t,x.a.cardNumber,Object(P.t)(U)),_(t,x.a.cardExpiry,Object(P.t)(U)),_(t,x.a.cardCvc,Object(P.t)(U)),_(t,x.a.postalCode,Object(P.t)(U)),_(t,x.a.idealBank,Object(P.t)(H)),t)),h=Object(P.H)(o,a,"type",{element:p}).value;return this._retrieveElementData(r).then(function(e){if("error"===e.type)return d.report(l+".validation_error",{error:e.error,element:p}),e;var t=e.element,r=e.locale,n=e.value,a=e.pastedFields,o=yt.transformElementData(t,n,h,a),i=o.data,c=o.type,s=o.pastedFields?{pastedFields:o.pastedFields}:{},u=Object(I.f)({type:c},m,i);return d.transformSourceParams(or({data:u,elementName:t,mids:f},s)).then(function(e){return{type:"element_source_params",locale:r,sourceParams:d.rawCardDataPresent(m)?or({},e,{payment_user_agent:ze}):e}})})}},{key:"createPaymentMethodParamsWithData",value:function(e){var t=e.type,r=e.paymentMethodData,n=e.mids;if("card"===t){var a=Object(P.H)(Object(P.v)(P.s),r.card,"createPaymentMethod card data").value;if(a){var o=!!Object(P.H)(Object(P.v)(P.z),a.token,"createPaymentMethod token string").value,i=this.hasValidBrandWalletParams(a);if(!o&&!i)return this.transformPaymentMethodParams({data:or({type:t},r),mids:n}).then(function(e){return{type:"data_payment_method_params",paymentMethodParams:or({},e,{payment_user_agent:Ce})}})}}return this.transformPaymentMethodParams({data:or({type:t},r),mids:n}).then(function(e){return{type:"data_payment_method_params",paymentMethodParams:e}})}},{key:"hasValidBrandWalletParams",value:function(e){if(e.masterpass||e.visa_checkout){var t=Object.keys(e);if(1===t.length)return!0;var r=t.filter(function(e){return"visa_checkout"!==e&&"masterpass"!==e});throw new j.a("Unexpected parameters for "+(e.visa_checkout?"Visa Checkout":"Masterpass")+": "+r.join(", "))}return!1}},{key:"createSourceParamsWithData",value:function(e){var t=e.type,r=e.sourceData,n=e.mids;if("card"===t){var a=Object(P.H)(Object(P.v)(P.s),r.card,"createSource card data").value,o=Object(P.H)(Object(P.v)(P.z),r.token,"createSource token string").value;if(!(a&&this.hasValidBrandWalletParams(a))&&!!!o)return this.transformSourceParams({data:or({type:t},r),mids:n}).then(function(e){return{type:"data_source_params",sourceParams:or({},e,{payment_user_agent:Ce})}})}return this.transformSourceParams({data:or({type:t},r),mids:n}).then(function(e){return{type:"data_source_params",sourceParams:e}})}},{key:"transformSourceParams",value:function(e){var t=this,r=e.mids,n=e.data,a=e.pastedFields,o=yt.transformData(n.type,n).data;return new O.a(function(e){e(or({},o,r||{},{pasted_fields:a},t.paymentMetadata()))})}},{key:"transformPaymentMethodParams",value:function(e){var t=this,r=e.mids,n=e.data,a=e.pastedFields,o=Rt(n.type,n).data;return new O.a(function(e){e(or({},o,r||{},{pasted_fields:a},t.paymentMetadata()))})}},{key:"createSourceWithParams",value:function(e){var r=this,t=e.sourceParams,n=e.locale,a=e.elementName,o="create_source";return yt.create(or({},t,this.authenticationParams())).then(function(e){var t=a?{element:a}:{};return r.reportFetchResult(o,e,t),r._localizeFetchResult(e,n)}).catch(function(e){return r.handleFetchErrorTagged(o,e,n)})}},{key:"createPaymentMethodWithParams",value:function(e){var r=this,t=e.paymentMethodParams,n=e.locale,a=e.elementName,o="create_payment_method";return Ft(or({},t,this.authenticationParams())).then(function(e){var t=a?{element:a}:{};return r.reportFetchResult(o,e,t),r._localizeFetchResult(e,n)}).catch(function(e){return r.handleFetchErrorTagged(o,e,n)})}},{key:"actionTokenizeForInner",value:function(e){var t=e.type,r=e.card,n=e.elementName,a=e.mids,o=b(e,["type","card","elementName","mids"]);return this.tokenizeWithData({type:t,elementName:n,elementData:{card:r},tokenData:o,mids:a,locale:this._resolveLocale()})}},{key:"actionRetrievePaymentIntentForInner",value:function(e){var t=e.id,r=e.clientSecret;return this.handlers.retrievePaymentIntent({intentSecret:{id:t,clientSecret:r},hosted:!1})}},{key:"actionRetrieveSetupIntentForInner",value:function(e){var t=e.id,r=e.clientSecret;return this.handlers.retrieveSetupIntent({intentSecret:{id:t,clientSecret:r},hosted:!1})}},{key:"actionCompleteChallenge3DS2",value:function(e){var t=this,r=e.threeDS2Source,n=e.data,a="complete_challenge_3ds2";return Vt(r,n,this.authenticationParams()).then(function(e){return t.reportFetchResult(a,e),t._localizeFetchResult(e)}).catch(function(e){return t.handleFetchErrorTagged(a,e)})}},{key:"retrieveIssuingCardFromCache",value:function(e){var t=this._issuingCardCache[e];if(t)return t;throw new Error("Issuing card "+e+" not found in cache")}},{key:"actionRetrieveIssuingCardNumberForInner",value:function(e){var t=e.cardId,r=this.retrieveIssuingCardFromCache(t);return new O.a(function(e){return e({data:r.number})})}},{key:"actionRetrieveIssuingCardCvcForInner",value:function(e){var t=e.cardId,r=this.retrieveIssuingCardFromCache(t);return new O.a(function(e){return e({data:r.cvc})})}},{key:"actionRetrieveIssuingCardExpiryForInner",value:function(e){var t=e.cardId,r=this.retrieveIssuingCardFromCache(t);return new O.a(function(e){return e({data:{exp_month:r.exp_month,exp_year:r.exp_year}})})}},{key:"actionRetrieveCardMetadata",value:function(e){var r=this,n=e.binPrefix,a="retrieve_card_metadata",t=this._cardMetadataCache[n];return this.flags.cm?t||((t=Kt(n,this.authenticationParams()).then(function(e){var t={bin_prefix:n};return r.reportFetchResult(a,e,t),r._localizeFetchResult(e)}).catch(function(e){return r.handleFetchErrorTagged(a,e)})).catch(function(){return{type:"error"}}).then(function(e){"error"===e.type&&delete r._cardMetadataCache[n]}),this._cardMetadataCache[n]=t):t=new O.a(function(){}),t}},{key:"actionVerifyCaptchaChallenge",value:function(e){return ye(e.verifyUrl.replace(/^\/v1\//,""),"POST",or({challenge_response_token:e.response,challenge_response_ekey:e.ekey},this.authenticationParams()))}},{key:"tokenizeWithData",value:function(e){var r=this,n="tokenize",a=e.locale,o=e.elementName,t=e.mids,i=e.type,c=e.tokenData,s=e.elementData,u=e.pastedFields,l=ht(i,c,o),d=l.data;l.warnings.forEach(function(e){return r.warn(e)});var p=Object(I.f)({},d,s||{});return _t(or({},p,t,this.paymentMetadata(),this.authenticationParams(),{pasted_fields:u})).then(function(e){var t=o?{element:o}:{};return r.reportFetchResult(n,e,t),r._localizeFetchResult(e,a)}).catch(function(e){return r.handleFetchErrorTagged(n,e,a)})}},{key:"_retrieveElementData",value:function(m,e){var r=this,t=!(1<arguments.length&&void 0!==e)||e,f=void 0,h=void 0,n=this.frames[m];if(n){var a=n.group,o=n.type,i=void 0;return i=a&&t?this.groups[a].filter(function(e){var t=r.frames[e].type;return o===x.b.CARD_ELEMENT||o===x.b.CARD_LIGHT_ELEMENT?t===x.b.CARD_ELEMENT||t===x.b.CARD_LIGHT_ELEMENT:t===o}):[m],this.requestStateFromFrames(i).then(function(e){var t={},r={},n=void 0,a=void 0;if(0===e.filter(function(e){return e&&e.frameId===m}).length)throw new j.a("We could not retrieve data from the specified Element.\n              Please make sure the Element you are attempting to use is still mounted.");for(var o=0;o<e.length;o+=1){var i=e[o];if(i){var c=i.meta,s=i.value,u=i.locale,l=i.element,d=i.frameId,p=i.pastedFields;if(c.brand&&(n=c.brand),c.accountHolderType&&(a=c.accountHolderType),d===m&&(f=u,h=l),c.error)return{type:"error",error:c.error,locale:c.locale};t=or({},t,s),r=or({},r,p)}}return or({type:"data",value:t,locale:f,element:h,pastedFields:Object.keys(r)},n?{clientCardBrand:n}:{},a?{accountHolderType:a}:{})},function(e){throw e})}throw new j.a("Please use the same instance of `Stripe` you used to create this Element to create your Source or Token.")}},{key:"_resolveLocale",value:function(e){return e||this.globalLocale||"auto"}},{key:"_decodeDataFromSessionId",value:function(e){if(e.length<=64)return{layoutType:null};var t=e.substring(8,10).charAt(0);return{layoutType:function(){switch(t){case"c":return"single_column";case"a":return"single_item";case"b":return"multi_item";default:return"single_item"}}()}}},{key:"requestStateFromFrames",value:function(e){return O.a.all(e.map(this.requestState))}},{key:"sendMessage",value:function(e,t){this._sendMessage({message:t,type:"controller",frameId:e,controllerId:this.controllerId})}},{key:"_sendMessage",value:function(e){var t=this.frames[e.frameId].queuedMessages;this._isFrameReady(e.frameId)?Object(R.b)(e):t.push(e)}},{key:"_isFrameReady",value:function(e){var t=this.frames[e].loaded;return!!Object(N.b)(e)&&t}},{key:"_checkFrameMountedProperly",value:function(){var e=this.id,t=this.controllerId,r=Object(N.b)(e)===window.self;e===t&&r||this.report("error.iframe_unreachable",{element:this.controllerFor(),frameId:e,controllerId:t,reachable:r})}},{key:"_setupPostMessage",value:function(){var o=this;window.addEventListener("message",function(e){var t,r=e.data,n=e.origin,a=Object(R.a)(r);a&&("stripe-controller-report"===(t=a.message).action?o._handleInnerReport(t.payload.event,t.payload.data):"stripe-controller-warn"===t.action?o.warn.apply(o,E(t.payload.args)):Object(S.a)(x.e,n)?o._handleInnerMessage(a,n):o._handleOuterMessage(a,n))})}},{key:"_handleOuterMessage",value:function(e,t){var r=this,n=e.message;switch(n.action){case"stripe-user-createframe":var a,o=n.payload,i=o.newFrameId,c=o.frameType,s=o.groupId;i&&(this.frames[i]={loaded:!1,queuedMessages:[],group:s,type:c},s&&(a=this.groups[s]||[],this.groups[s]=[].concat(E(a),[i])));break;case"stripe-safe-controller-action-request":this.handleAction(n.payload,t);break;case"stripe-frame-unload":var u=n.payload.unloadedFrameId;this.frames[u]=or({},this.frames[u],{loaded:!1});break;case"stripe-frame-destroy":var l=n.payload.destroyedFrameId;delete this.frames[l];break;case"stripe-frame-load":var d=n.payload.loadedFrameId,p=this.frames[d],m=p.queuedMessages;this.frames[d]=or({},p,{queuedMessages:[],loaded:!0}),m.forEach(function(e){return r._sendMessage(e)}),this.sendMessage(d,{action:"stripe-controller-init",payload:{}});break;case"stripe-user-mount":var f=n.payload,h=f.timestamps,_=h.create,b=h.mount,y=f.loadCount,v=f.matchFrame,g=A.a.fromPosixTime(b),O=A.a.fromPosixTime(_);this.logPerformanceTimings({timings:{mountTimestamp:g,createTimestamp:O},loadCount:y,matchFrame:v});break;case"stripe-wrapper-register":var j=n.payload.wrapperLibrary,P=j.startTime;P&&(!this.createWrapperTimestamp||this.createWrapperTimestamp.getAsPosixTime()>P)&&(this.createWrapperTimestamp=A.a.fromPosixTime(P)),this.wrappers.push(j),Te.updateParams(w(this.wrappers)),this.report("register_wrapper.update")}}},{key:"_handleInnerReport",value:function(e,t){var r,n,a,o,i;"event.first_interaction"===e&&(r=t.element,this.flags.pc&&/^card/.test(String(r))&&(Ke||!0===n&&Ze||(a=Object(F.g)(Ge),o=document.head,a&&o&&((i=document.createElement("link")).rel=!0===n?"dns-prefetch":"preconnect",i.href=a.origin,i.crossOrigin="anonymous",o.appendChild(i),Ke=(Ze=!0)!==n)))),this.report(e,t)}},{key:"_handleInnerMessage",value:function(t,e){var r=this,n=t.frameId,a=t.message,o=n&&this.frames[n];if(o)switch(a.action){case"stripe-controller-request-complete":var i=a.payload,c=i.nonce,s=i.result,u=i.error;if(!c||"string"!=typeof c||!this.requests[c])break;var l=this.requests[c],d=l.resolve,p=l.reject;s&&"object"===(void 0===s?"undefined":tr(s))?d(or({},s,{frameId:n})):u&&"object"===(void 0===u?"undefined":tr(u))&&p(or({},u,{frameId:n})),delete this.requests[c];break;case"stripe-inner-action":this.innerAction(a.payload.type,a.payload.options,e).then(function(e){return r.sendMessage(n,{action:"stripe-inner-action-complete",payload:{nonce:a.payload.nonce,result:e}})},function(e){Q.g[a.payload.type]&&r.report(a.payload.type.toLowerCase()+".error",{options:a.payload.options,error:e instanceof Error?or({name:e.name,message:e.message},e):e}),r.sendMessage(n,{action:"stripe-inner-action-error",payload:{nonce:a.payload.nonce,error:e.message}})});break;case"stripe-group-update":case"stripe-group-action":var m=o.group,f=m&&this.groups[m];f&&n&&-1!==f.indexOf(n)&&f.forEach(function(e){n!==e&&r._sendMessage(or({},t,{frameId:e,type:"controller"}))});break;default:this._handleOuterMessage(t,e)}else this._handleOuterMessage(t,e)}},{key:"_buildEncodedUrlParams",value:function(e){var t=e.mids,r=e.betas,n=e.layoutType,a=b(e,["mids","betas","layoutType"]),o=Object(F.g)(this.referrer);return c(JSON.stringify(or({apiKey:this.apiKey,stripeAccount:this.stripeAccount,mids:t,betas:r,layoutType:n,referrerOrigin:o?o.origin:null},a)))}}]),ur);function ur(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ur),dr.call(this);var r=b(Object(C.a)(e),[]),n=Object(P.H)(Object(P.x)({controllerId:Object(P.v)(P.z),__privateApiUrl:Object(P.v)(P.z),apiKey:Object(P.v)(P.z),apiVersion:Object(P.v)(P.z),stripeAccount:Object(P.v)(P.z),betas:Object(P.v)(Object(P.b)(P.u.apply(void 0,E(k.b)))),referrer:Object(P.v)(P.z),stripeJsId:Object(P.v)(P.z),stripeJsLoadTime:Object(P.v)(P.z),locale:Object(P.v)(P.z),outerFlags:Object(P.v)(Object(P.m)(P.A))}),r,"[internal interface]",{authenticatedOrigin:Q.i}).value,a=n.apiKey,o=n.apiVersion,i=n.__privateApiUrl,c=n.stripeAccount,s=n.outerFlags,u=n.betas,l=n.controllerId,d=n.stripeJsId,p=n.stripeJsLoadTime,m=n.referrer,f=n.locale;if(!(a&&d&&p&&l))throw new Error("It looks like Stripe.js was not loaded correctly");this.stripeJsLoadTimestamp=A.a.fromPosixTime(Number(p)),this.loadTimestamp=new A.a,this.apiKey=a,this.apiVersion=o,this.stripeAccount=c,this.stripeJsId=d,this.id=window.name,this.betas=u,this.controllerId=l,this.flags=cr(s),this.globalLocale=f||null,this.wrappers=[];var h=Object(F.g)(Q.l);h&&h.host!==window.location.host?this.referrer=Q.l:"string"==typeof m?this.referrer=m:(this.referrer="",this.report("controller.missing_referrer")),this.shouldWarn=Object(z.b)(a)===z.a.test,i&&(Qe(i)||this.warn("__privateApiUrl can only be used by Stripe-owned integrations, with stripe.com or stripe.me domains."));var _={};Object.keys(this.flags).forEach(function(e){_["flag_"+e]=String(t.flags[e])}),Te.updateParams(or({key:a,referrer:this.referrer},u?{betas:u}:{},{stripe_js_id:d,controller_load_time:this.loadTimestamp.getAsPosixTime()},w([]),_)),Xe(function(){t._sendParentMessage({action:"stripe-api-call",payload:{}})}),this.frames={},this.groups={},this.requests={},this.cachedRadarSessions={},this._setupPostMessage(),Object(X.a)(this),this._checkFrameMountedProperly(),this._sendParentMessage({action:"stripe-controller-load",payload:{}}),this.report("controller.load")}var lr,dr=function(){var d=this;this.warn=function(){d.shouldWarn&&y.apply(void 0,arguments)},this.controllerFor=function(){return"ControllerApp"},this.rawCardDataPresent=function(e){if(e.card&&"object"===tr(e.card)){var t=e.card.number||e.card.cvc||e.card.exp_month||e.card.exp_year;return t&&d.report("create_source_card_data",{number:!!e.card.number,cvc:!!e.card.cvc,exp_month:!!e.card.exp_month,exp_year:!!e.card.exp_year}),t}return!1},this.parseIntentMutationParams=function(e,t,a){var r=e.mode,o=e.otherParams,i=e.expectedType,n=e.mids,c=e.options;switch(r.tag){case"paymentMethod-from-element":return O.a.all([d._transformPaymentMethodOptions(r.options),d.createPaymentMethodParamsWithElement({frameId:r.frameId,elementName:r.elementName,type:r.type,paymentMethodData:r.data,mids:n},t)]).then(function(e){var t=er(e,2),r=t[0],n=t[1];return"error"===r.type?r:"error"===n.type?n:{type:a,locale:n.locale,params:or({},o,{payment_method_data:n.paymentMethodParams,payment_method_options:r.paymentMethodOptions,expected_payment_method_type:i})}});case"paymentMethod-from-data":if(null===r.type)throw new j.a("payment_method[type] is required to create a payment method");return O.a.all([d._transformPaymentMethodOptions(r.options),d.createPaymentMethodParamsWithData({elementName:null,type:r.type,paymentMethodData:r.data,mids:n})]).then(function(e){var t=er(e,2),r=t[0],n=t[1].paymentMethodParams;return"error"===r.type?r:{type:a,locale:null,params:or({},o,{payment_method_data:n,payment_method_options:r.paymentMethodOptions,expected_payment_method_type:i})}});case"paymentMethod":return d._transformPaymentMethodOptions(r.options).then(function(e){return"error"===e.type?e:{type:a,locale:null,params:or({},o,{payment_method:r.paymentMethod,payment_method_options:e.paymentMethodOptions,expected_payment_method_type:i})}});case"none":return O.a.resolve({type:a,locale:null,params:or({},o,{expected_payment_method_type:i})});case"source-from-element":return O.a.all([d.createSourceParamsWithElement({frameId:r.frameId,elementName:r.elementName,type:r.type,sourceData:r.data,mids:n},t),d.isSecurePaymentConfirmationEligible()]).then(function(e){var t=er(e,2),r=t[0],n=t[1];return"error"===r.type?r:{type:a,locale:r.locale,params:d.transformConfirmWithSourceParams(or({},o,{source_data:r.sourceParams,expected_payment_method_type:i}),c,n)}});case"source-from-data":return O.a.all([d.createSourceParamsWithData({elementName:null,type:r.type,sourceData:r.data,mids:n}),d.isSecurePaymentConfirmationEligible()]).then(function(e){var t=er(e,2),r=t[0].sourceParams,n=t[1];return{type:a,locale:null,params:d.transformConfirmWithSourceParams(or({},o,{source_data:r,expected_payment_method_type:i}),c,n)}});case"source":return d.isSecurePaymentConfirmationEligible().then(function(e){return{type:"confirmParams",locale:null,params:d.transformConfirmWithSourceParams(or({},o,{source:r.source,expected_payment_method_type:i}),c,e)}});default:return Object(h.a)(r)}},this.confirmIntentParams=function(e,t){var a=e.options,o=e.expectedType;return O.a.all([d.parseIntentMutationParams(e,t,"confirmParams"),d.isSecurePaymentConfirmationEligible()]).then(function(e){var t=er(e,2),r=t[0],n=t[1];return"error"===r.type?r:or({},r,{params:d.transformConfirmWithPaymentMethodParams(o,a,n,r.params)})})},this.updateIntentParams=function(e,t){return d.parseIntentMutationParams(e,t,"updateParams")},this.isSecurePaymentConfirmationEligible=function(){return window.PaymentCredential&&window.PublicKeyCredential?window.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable():O.a.resolve(!1)},this._issuingCardCache={},this._cardMetadataCache={},this.tokenizeWithElement=function(e){var t=e.frameId,s=e.elementName,u=e.tokenData,l=e.mids;return d._retrieveElementData(t).then(function(e){if("error"===e.type){var t=e.error,r=e.locale,n={error:t,element:s};return d.report("tokenize.validation_error",n),{type:"error",error:t,locale:r}}var a=e.value,o=e.element,i=e.pastedFields,c=ft(o,a,i);return c.warnings.forEach(function(e){return d.warn(e)}),d.tokenizeWithData({type:c.type,locale:e.locale,elementName:o,mids:l,pastedFields:c.pastedFields,clientCardBrand:e.clientCardBrand,elementData:c.data,tokenData:u})})},this._localizeFetchResult=function(e,t){return Ee(e,d._resolveLocale(t),d)},this.handlers={confirmSetupIntent:function(a){var o=a.intentSecret,i="confirm_setup_intent";return d.confirmIntentParams(a,i).then(function(e){if("error"===e.type)return e;var r=e.locale,t=e.params,n=or({},t,d.authenticationParams());return wt(o.id,o.clientSecret,n).then(function(e){var t={element:u(a.mode),payment_method_type:a.expectedType};return d.reportFetchResult(i,e,t),d._localizeFetchResult(e,r)})}).catch(function(e){return d.handleFetchErrorTagged(i,e)})},retrieveSetupIntent:function(e){var t=e.intentSecret,r=e.hosted,n=e.asErrorIfNotSucceeded,a=e.locale,o="retrieve_setup_intent";return St(t.id,t.clientSecret,or({},d.authenticationParams(),{is_stripe_sdk:r})).then(function(e){d.reportFetchResult(o,e);var t=n?p(e):e;return d._localizeFetchResult(t,a)}).catch(function(e){return d.handleFetchErrorTagged(o,e,a)})},cancelSetupIntentSource:function(e){var t=e.intentSecret,r=e.sourceId,n=e.locale,a="setup_intent_source_cancel";return Tt(t.id,or({},d.authenticationParams(),{source:r})).then(function(e){return d.reportFetchResult(a,e),"error"===e.type?d.handlers.retrieveSetupIntent({intentSecret:t,hosted:!1,asErrorIfNotSucceeded:!0,locale:n}):d._localizeFetchResult(p(e),n)}).catch(function(e){return d.handleFetchErrorTagged(a,e)})},cancelPaymentIntentSource:function(e){var t=e.intentSecret,r=e.sourceId,n=e.locale,a="payment_intent_source_cancel";return Pt(t.id,or({},d.authenticationParams(),{source:r})).then(function(e){return d.reportFetchResult(a,e),"error"===e.type?d.handlers.retrievePaymentIntent({intentSecret:t,hosted:!1,asErrorIfNotSucceeded:!0,locale:n}):d._localizeFetchResult(p(e),n)}).catch(function(e){return d.handleFetchErrorTagged(a,e)})},retrievePaymentIntent:function(e){var t=e.intentSecret,r=e.hosted,n=e.asErrorIfNotSucceeded,a=e.locale,o="retrieve_payment_intent";return gt(t.id,t.clientSecret,or({},d.authenticationParams(),{is_stripe_sdk:r})).then(function(e){d.reportFetchResult(o,e);var t=n?p(e):e;return d._localizeFetchResult(t,a)}).catch(function(e){return d.handleFetchErrorTagged(o,e,a)})},updatePaymentIntent:function(a){var o="update_payment_intent",i=a.intentSecret;return d.updateIntentParams(a,"update_payment_intent").then(function(e){if("error"===e.type)return e;var r=e.locale,t=e.params,n=or({},t,d.authenticationParams());return jt(i.id,i.clientSecret,n).then(function(e){var t={element:u(a.mode),payment_method_type:a.expectedType};return d.reportFetchResult(o,e,t),d._localizeFetchResult(e,r)})}).catch(function(e){return d.handleFetchErrorTagged(o,e)})},confirmPaymentIntent:function(a){var o=a.intentSecret,i="confirm_payment_intent";return d.confirmIntentParams(a,i).then(function(e){if("error"===e.type)return e;var r=e.locale,t=e.params,n=or({},t,d.authenticationParams());return Ot(o.id,o.clientSecret,n).then(function(e){var t={element:u(a.mode),payment_method_type:a.expectedType};return d.reportFetchResult(i,e,t),d._localizeFetchResult(e,r)})}).catch(function(e){return d.handleFetchErrorTagged(i,e)})},fetchLocale:function(e){var t=e.locale;return Object(Z.c)(t).then(function(){},function(e){d.report("error.locale_load_error",{error:e,locale:t})})},tokenizeWithElement:this.tokenizeWithElement,tokenizeCvcUpdate:function(e){var t=e.frameId,r=e.mids,n="tokenize",a=d._resolveLocale();return d._retrieveElementData(t,!1).then(function(e){return"error"===e.type?(d.report("tokenize.validation_error",{error:e.error,element:"cardCvc"}),e):_t(or({},r,d.paymentMetadata(),d.authenticationParams(),{cvc_update:{cvc:e.value.cardCvc}})).then(function(e){return d.reportFetchResult(n,e),d._localizeFetchResult(e,a)}).catch(function(e){return d.handleFetchErrorTagged(n,e,a)})})},tokenizeWithData:function(e){var t=e.type,r=e.elementName,n=e.tokenData,a=e.mids,o=Object(P.H)(P.t.apply(void 0,ir),t,"token type").value;return d.tokenizeWithData({type:o,elementName:r,tokenData:n,mids:a,locale:d._resolveLocale()})},createSourceWithElement:function(e){var n=e.elementName;return d.createSourceParamsWithElement(e,"create_source").then(function(e){if("error"===e.type)return e;var t=e.locale,r=e.sourceParams;return d.createSourceWithParams({sourceParams:r,locale:t,elementName:n})})},createSourceWithData:function(e){var r=e.elementName;return d.createSourceParamsWithData(e).then(function(e){var t=e.sourceParams;return d.createSourceWithParams({sourceParams:t,locale:d._resolveLocale(),elementName:r})})},createPaymentMethodWithElement:function(e){var n=e.elementName;return d.createPaymentMethodParamsWithElement(e,"create_payment_method").then(function(e){if("error"===e.type)return e;var t=e.locale,r=e.paymentMethodParams;return d.createPaymentMethodWithParams({paymentMethodParams:r,locale:t,elementName:n})})},createPaymentMethodWithData:function(e){var r=e.elementName;return d.createPaymentMethodParamsWithData(e).then(function(e){var t=e.paymentMethodParams;return d.createPaymentMethodWithParams({paymentMethodParams:t,locale:d._resolveLocale(),elementName:r})})},updateCSSFonts:function(e){var t=e.fonts,r=e.groupId;return d.groups[r]&&d.groups[r].forEach(function(e){d.sendMessage(e,{action:"stripe-controller-update",payload:{fonts:t}})}),O.a.resolve()},createApplePaySession:function(e){var r="create_apple_pay_session",t=e.data,n=e.usesButtonElement;return xt.create(or({},t,d.authenticationParams())).then(function(e){d.reportFetchResult(r,e,{usesButtonElement:n});var t=function(e,t){switch(e.type){case"error":return e;case"object":return{type:"object",object:Object(P.H)(t,e.object,"[internal request]").value};default:return Object(h.a)(e,"Error parsing result from an internal request.")}}(e,xt.transforms);return d._localizeFetchResult(t)}).catch(function(e){return d.handleFetchErrorTagged(r,e)})},retrieveSource:function(e){var t=e.source,r="retrieve_source",n=t.id,a=t.client_secret;return yt.retrieve(n,or({client_secret:a},d.authenticationParams())).then(function(e){return d.reportFetchResult(r,e),d._localizeFetchResult(e)}).catch(function(e){return d.handleFetchErrorTagged(r,e)})},createPaymentPage:function(e){var c="create_payment_page",s=e.betas,u=e.mids,t=b(e,["betas","mids"]),l=t.locale||d.globalLocale;return Nt.create(or({},u,t,d.authenticationParams(),{referrer:d.referrer})).then(function(e){if("error"!==e.type)return"object"===e.type&&(r=(t=e.object).url,n=t.session_id,d.reportFetchResult(c,e,{url:r}),a=d._decodeDataFromSessionId(n).layoutType,o=d._buildEncodedUrlParams({mids:u,betas:s,locale:l,layoutType:a}),e.object.url=ar(r)+"#"+o),d._localizeFetchResult(e,l);var t,r,n,a,o,i=e.error;throw d.reportFetchResult(c,e),new j.a(i.message||i.code||"unexpected error")}).catch(function(e){return d.handleFetchErrorTagged(c,e,l)})},createPaymentPageWithSession:function(e){var t=e.betas,r=e.mids,n=e.sessionId,a=d._decodeDataFromSessionId(n).layoutType,o=d._buildEncodedUrlParams({mids:r,betas:t,layoutType:a}),i=ar("https://checkout.stripe.com/pay/"+encodeURIComponent(n)),c=d._localizeFetchResult({type:"object",object:{url:i+"#"+o}});return O.a.resolve(c)},createRadarSession:function(e){var t,r="create_radar_session",n=e.mids,a=n?n.muid+"#"+n.guid+"#"+n.sid:"";return d.cachedRadarSessions[a]=d.cachedRadarSessions[a]||(t=d._resolveLocale(),Jt.create(or({},n,{payment_user_agent:Ie,referrer:d.referrer},d.authenticationParams())).then(function(e){return d.reportFetchResult(r,e),d._localizeFetchResult(e,t)}).catch(function(e){return d.handleFetchErrorTagged(r,e,t)}).then(function(e){return"error"===e.type&&delete d.cachedRadarSessions[a],e})),d.cachedRadarSessions[a]},authenticate3DS2:function(e){var t="authenticate_3ds2";return Bt(e.threeDS2Source,e.outerWindowWidth,e.hosted,e.fingerprintResult,d.authenticationParams()).then(function(e){return d.reportFetchResult(t,e),d._localizeFetchResult(e)}).catch(function(e){return d.handleFetchErrorTagged(t,e)})},verifyMicrodepositsForPayment:function(e){var t=e.intentSecret,r=e.data,n="payment_intent_verify_microdeposits",a=or({},r,d.authenticationParams());return Et(t.id,t.clientSecret,a).then(function(e){return d.reportFetchResult(n,e),d._localizeFetchResult(e)}).catch(function(e){return d.handleFetchErrorTagged(n,e)})},verifyMicrodepositsForSetup:function(e){var t=e.intentSecret,r=e.data,n="setup_intent_verify_microdeposits",a=or({},r,d.authenticationParams());return It(t.id,t.clientSecret,a).then(function(e){return d.reportFetchResult(n,e),d._localizeFetchResult(e)}).catch(function(e){return d.handleFetchErrorTagged(n,e)})},retrieveIssuingCard:function(e){var n=e.cardId,t=e.ephemeralKeySecret,a="retrieve_issuing_card";return Gt(n,t).then(function(e){var t,r=e;return"object"===e.type&&(d._issuingCardCache[n]={number:e.object.number,cvc:e.object.cvc,exp_month:e.object.exp_month,exp_year:e.object.exp_year},(t=e.object).cvc,t.exp_month,t.exp_year,t.number,r={type:"object",object:b(t,["cvc","exp_month","exp_year","number"])},d.reportFetchResult(a,r)),d._localizeFetchResult(r)}).catch(function(e){return d.handleFetchErrorTagged(a,e)})},createAcssDebitSession:function(e){var t=e.intentSecret,r=t.id,n=t.clientSecret,a=e.billingDetails,o=e.mode,i="create_acss_debit_session",c=d._resolveLocale();return Qt(r,n,o,or({},d.authenticationParams(),{billing_details:a})).then(function(e){return d.reportFetchResult(i,e),d._localizeFetchResult(e,c)}).catch(function(e){return d.handleFetchErrorTagged(i,e,c)})},confirmReturnIntent:function(e){var t=e.returnIntentId,r=e.data,n="confirm_return_intent",a=or({},r,d.authenticationParams());return Xt(t,a).then(function(e){return d.reportFetchResult(n,e),d._localizeFetchResult(e)}).catch(function(e){return d.handleFetchErrorTagged(n,e)})},localizeError:function(e){var t=Object(M.a)(e,d._resolveLocale()),r=er(t,2),n=r[0];return r[1].forEach(function(e){return d.report.apply(d,E(e))}),O.a.resolve(n)}},this.handleAction=function(e){var t=e.nonce,r=e.caReq,n={};switch(r.tag){case"CONFIRM_SETUP_INTENT":d._respondUsingPromise(t,function(){return d.handlers.confirmSetupIntent(r.value)});break;case"RETRIEVE_SETUP_INTENT":d._respondUsingPromise(t,function(){return d.handlers.retrieveSetupIntent(r.value)});break;case"CANCEL_SETUP_INTENT_SOURCE":d._respondUsingPromise(t,function(){return d.handlers.cancelSetupIntentSource(r.value)});break;case"RETRIEVE_PAYMENT_INTENT":d._respondUsingPromise(t,function(){return d.handlers.retrievePaymentIntent(r.value)});break;case"UPDATE_PAYMENT_INTENT":d._respondUsingPromise(t,function(){return d.handlers.updatePaymentIntent(r.value)});break;case"CONFIRM_PAYMENT_INTENT":d._respondUsingPromise(t,function(){return d.handlers.confirmPaymentIntent(r.value)});break;case"CANCEL_PAYMENT_INTENT_SOURCE":d._respondUsingPromise(t,function(){return d.handlers.cancelPaymentIntentSource(r.value)});break;case"FETCH_LOCALE":d._respondUsingPromise(t,function(){return d.handlers.fetchLocale(r.value)});break;case"UPDATE_CSS_FONTS":d._respondUsingPromise(t,function(){return d.handlers.updateCSSFonts(r.value)});break;case"CREATE_APPLE_PAY_SESSION":d._respondUsingPromise(t,function(){return d.handlers.createApplePaySession(r.value)});break;case"RETRIEVE_SOURCE":d._respondUsingPromise(t,function(){return d.handlers.retrieveSource(r.value)});break;case"TOKENIZE_WITH_ELEMENT":d._respondUsingPromise(t,function(){return d.handlers.tokenizeWithElement(r.value)});break;case"TOKENIZE_CVC_UPDATE":d._respondUsingPromise(t,function(){return d.handlers.tokenizeCvcUpdate(r.value)});break;case"TOKENIZE_WITH_DATA":d._respondUsingPromise(t,function(){return d.handlers.tokenizeWithData(r.value)});break;case"CREATE_SOURCE_WITH_ELEMENT":d._respondUsingPromise(t,function(){return d.handlers.createSourceWithElement(r.value)});break;case"CREATE_SOURCE_WITH_DATA":d._respondUsingPromise(t,function(){return d.handlers.createSourceWithData(r.value)});break;case"CREATE_PAYMENT_METHOD_WITH_ELEMENT":d._respondUsingPromise(t,function(){return d.handlers.createPaymentMethodWithElement(r.value)});break;case"CREATE_PAYMENT_METHOD_WITH_DATA":d._respondUsingPromise(t,function(){return d.handlers.createPaymentMethodWithData(r.value)});break;case"CREATE_PAYMENT_PAGE":d._respondUsingPromise(t,function(){return d.handlers.createPaymentPage(r.value)}),n={options:r.value};break;case"CREATE_PAYMENT_PAGE_WITH_SESSION":d._respondUsingPromise(t,function(){return d.handlers.createPaymentPageWithSession(r.value)}),n={options:r.value};break;case"CREATE_RADAR_SESSION":d._respondUsingPromise(t,function(){return d.handlers.createRadarSession(r.value)});break;case"AUTHENTICATE_3DS2":d._respondUsingPromise(t,function(){return d.handlers.authenticate3DS2(r.value)});break;case"VERIFY_MICRODEPOSITS_FOR_PAYMENT":d._respondUsingPromise(t,function(){return d.handlers.verifyMicrodepositsForPayment(r.value)});break;case"VERIFY_MICRODEPOSITS_FOR_SETUP":d._respondUsingPromise(t,function(){return d.handlers.verifyMicrodepositsForSetup(r.value)});break;case"RETRIEVE_ISSUING_CARD":d._respondUsingPromise(t,function(){return d.handlers.retrieveIssuingCard(r.value)});break;case"CREATE_ACSS_DEBIT_SESSION":d._respondUsingPromise(t,function(){return d.handlers.createAcssDebitSession(r.value)});break;case"CONFIRM_RETURN_INTENT":d._respondUsingPromise(t,function(){return d.handlers.confirmReturnIntent(r.value)});break;case"LOCALIZE_ERROR":d._respondUsingPromise(t,function(){return d.handlers.localizeError(r.value)});break;default:Object(h.a)(r)}d.report(r.tag.toLowerCase(),n)},this.requestState=function(r){var n=Object(T.b)(),e=new O.a(function(e,t){d.requests[n]=or({},d.requests[n],{resolve:e,reject:t}),d._isFrameReady(r)?d.sendMessage(r,{action:"stripe-controller-request",payload:{nonce:n}}):e(void 0)});return d.requests[n]=or({},d.requests[n],{promise:e}),e},this._respondUsingPromise=function(t,r){new O.a(function(e){return e(r())}).then(function(e){return{action:"stripe-safe-controller-action-response",payload:{nonce:t,caRes:e}}},function(e){return{action:"stripe-safe-controller-action-error",payload:{nonce:t,caErr:e}}}).then(d._sendParentMessage)},this._sendParentMessage=function(e){Object(R.b)({message:e,type:"inner",frameId:d.id,controllerId:d.controllerId})}},pr=sr;lr=window.location.hash.substring(1).split("?")[0],new pr(lr)},14:function(e,t,r){r("9Ync"),e.exports=r("+/hr")}});